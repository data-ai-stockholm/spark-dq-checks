<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPARK-DQ-SHIFTLEFT Architecture</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500&family=Outfit:wght@600;700&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; font-family: 'Outfit', sans-serif; overflow: hidden; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes flow { 0% { stroke-dashoffset: 1000; } 100% { stroke-dashoffset: 0; } }
        .flow-arrow { stroke-dasharray: 6 3; animation: flow 2s linear infinite; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        function Architecture() {
            return (
                <div className="h-screen w-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4">
                    <div className="w-full max-w-5xl">
                        <div className="text-center mb-4 fade-in">
                            <h1 className="text-3xl font-bold text-white mb-1">spark-dq-checks</h1>
                            <p className="text-slate-400 text-sm mb-2">Two-Phase Data Quality Pipeline</p>
                            <div className="flex justify-center gap-2 text-xs">
                                <span className="bg-orange-600/20 text-orange-400 px-2 py-0.5 rounded-full border border-orange-600/40" style={{fontFamily: 'JetBrains Mono'}}>PySpark</span>
                                <span className="bg-purple-600/20 text-purple-400 px-2 py-0.5 rounded-full border border-purple-600/40" style={{fontFamily: 'JetBrains Mono'}}>Spark-Expectations</span>
                                <span className="bg-blue-600/20 text-blue-400 px-2 py-0.5 rounded-full border border-blue-600/40" style={{fontFamily: 'JetBrains Mono'}}>4 Rules</span>
                            </div>
                        </div>
                        <div className="bg-slate-800/50 backdrop-blur rounded-lg p-4 border border-slate-700 fade-in">
                            <svg viewBox="0 0 900 480" className="w-full h-auto">
                                <defs>
                                    <linearGradient id="blue" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" stopColor="#3b82f6" stopOpacity="0.9" />
                                        <stop offset="100%" stopColor="#1e40af" stopOpacity="0.9" />
                                    </linearGradient>
                                    <linearGradient id="green" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" stopColor="#10b981" stopOpacity="0.9" />
                                        <stop offset="100%" stopColor="#059669" stopOpacity="0.9" />
                                    </linearGradient>
                                    <linearGradient id="purple" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" stopColor="#a855f7" stopOpacity="0.9" />
                                        <stop offset="100%" stopColor="#7c3aed" stopOpacity="0.9" />
                                    </linearGradient>
                                    <marker id="arrow" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
                                        <path d="M0,0 L0,6 L8,3 z" fill="#60a5fa" />
                                    </marker>
                                </defs>
                                <rect x="325" y="10" width="250" height="50" rx="6" fill="url(#blue)" stroke="#60a5fa" strokeWidth="2" />
                                <text x="450" y="32" textAnchor="middle" fill="white" fontSize="14" fontWeight="600">üìÅ Input CSV (74 years)</text>
                                <text x="450" y="48" textAnchor="middle" fill="#e2e8f0" fontSize="11" fontFamily="JetBrains Mono">1950-2023 Crime Data</text>
                                <path d="M 450 60 L 450 95" stroke="#60a5fa" strokeWidth="2.5" fill="none" markerEnd="url(#arrow)" className="flow-arrow" />
                                <rect x="300" y="95" width="300" height="70" rx="8" fill="#1e293b" stroke="#34d399" strokeWidth="2" />
                                <text x="450" y="115" textAnchor="middle" fill="#34d399" fontSize="16" fontWeight="700">PHASE 1: Basic Cleaning</text>
                                <text x="450" y="135" textAnchor="middle" fill="#94a3b8" fontSize="11" fontFamily="JetBrains Mono">Remove nulls ‚Ä¢ Filter Year &gt; 0</text>
                                <text x="450" y="155" textAnchor="middle" fill="#fbbf24" fontSize="10" fontFamily="JetBrains Mono">‚Üí offences_cleaned_no_dq/</text>
                                <path d="M 450 165 L 450 205" stroke="#34d399" strokeWidth="2.5" fill="none" markerEnd="url(#arrow)" className="flow-arrow" />
                                <rect x="200" y="205" width="500" height="110" rx="8" fill="#1e293b" stroke="#a855f7" strokeWidth="2" />
                                <text x="450" y="225" textAnchor="middle" fill="#a855f7" fontSize="16" fontWeight="700">PHASE 2: Quality Validation</text>
                                <rect x="220" y="238" width="210" height="65" rx="5" fill="#0f172a" stroke="#8b5cf6" strokeWidth="1.5" />
                                <text x="325" y="254" textAnchor="middle" fill="#c4b5fd" fontSize="12" fontWeight="600">4 DQ Rules</text>
                                <text x="325" y="269" textAnchor="middle" fill="#94a3b8" fontSize="9" fontFamily="JetBrains Mono">year_not_null ‚Ä¢ year_valid_range</text>
                                <text x="325" y="282" textAnchor="middle" fill="#94a3b8" fontSize="9" fontFamily="JetBrains Mono">total_crimes_positive</text>
                                <text x="325" y="295" textAnchor="middle" fill="#94a3b8" fontSize="9" fontFamily="JetBrains Mono">no_duplicate_years (agg)</text>
                                <circle cx="550" cy="270" r="32" fill="url(#purple)" stroke="#a855f7" strokeWidth="2" />
                                <text x="550" y="270" textAnchor="middle" fill="white" fontSize="11" fontWeight="600">Validate</text>
                                <text x="550" y="282" textAnchor="middle" fill="#e2e8f0" fontSize="9">Records</text>
                                <path d="M 300 315 L 300 355 L 220 355 L 220 375" stroke="#10b981" strokeWidth="2" fill="none" markerEnd="url(#arrow)" />
                                <path d="M 450 315 L 450 375" stroke="#ef4444" strokeWidth="2" fill="none" markerEnd="url(#arrow)" />
                                <path d="M 600 315 L 600 355 L 680 355 L 680 375" stroke="#fbbf24" strokeWidth="2" fill="none" markerEnd="url(#arrow)" />
                                <rect x="100" y="375" width="240" height="55" rx="6" fill="#064e3b" stroke="#10b981" strokeWidth="2" />
                                <text x="220" y="395" textAnchor="middle" fill="#34d399" fontSize="12" fontWeight="600">‚úì Clean Data</text>
                                <text x="220" y="410" textAnchor="middle" fill="#d1fae5" fontSize="9" fontFamily="JetBrains Mono">offences_cleaned_with_dq/</text>
                                <text x="220" y="423" textAnchor="middle" fill="#86efac" fontSize="8" fontFamily="JetBrains Mono">Parquet format</text>
                                <rect x="350" y="375" width="200" height="55" rx="6" fill="#7f1d1d" stroke="#ef4444" strokeWidth="2" />
                                <text x="450" y="395" textAnchor="middle" fill="#f87171" fontSize="12" fontWeight="600">‚úó Error Records</text>
                                <text x="450" y="410" textAnchor="middle" fill="#fecaca" fontSize="9" fontFamily="JetBrains Mono">*_error/ + metadata</text>
                                <text x="450" y="423" textAnchor="middle" fill="#fca5a5" fontSize="8" fontFamily="JetBrains Mono">Failed validations</text>
                                <rect x="560" y="375" width="240" height="55" rx="6" fill="#451a03" stroke="#fbbf24" strokeWidth="2" />
                                <text x="680" y="395" textAnchor="middle" fill="#fbbf24" fontSize="12" fontWeight="600">üìä Statistics</text>
                                <text x="680" y="410" textAnchor="middle" fill="#fde68a" fontSize="9" fontFamily="JetBrains Mono">dq_stats/</text>
                                <text x="680" y="423" textAnchor="middle" fill="#fcd34d" fontSize="8" fontFamily="JetBrains Mono">Pass/fail metrics</text>
                                <rect x="50" y="445" width="800" height="30" rx="5" fill="#0f172a" stroke="#475569" strokeWidth="1" />
                                <text x="150" y="463" fill="#94a3b8" fontSize="9" fontFamily="JetBrains Mono">‚úì Early detection</text>
                                <text x="350" y="463" fill="#94a3b8" fontSize="9" fontFamily="JetBrains Mono">‚úì Auto validation</text>
                                <text x="600" y="463" fill="#94a3b8" fontSize="9" fontFamily="JetBrains Mono">‚úì Separate streams</text>
                            </svg>
                        </div>
                        <div className="text-center text-slate-500 text-xs mt-3 fade-in" style={{fontFamily: 'JetBrains Mono'}}>
                            <a href="https://linkedin.com/in/meghnaa-anand" className="text-blue-400 hover:text-blue-300" target="_blank" rel="noopener noreferrer">Meghna Anand</a>
                            {' ‚Ä¢ '}
                            <a href="https://github.com/data-ai-stockholm/spark-dq-checks" className="text-blue-400 hover:text-blue-300" target="_blank" rel="noopener noreferrer">GitHub</a>
                        </div>
                    </div>
                </div>
            );
        }
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Architecture />);
    </script>
</body>
</html>